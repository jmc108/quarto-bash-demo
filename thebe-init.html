<script>
window.addEventListener('load', () => {
  // Find Quarto/Pandoc code blocks that are Bash
  document.querySelectorAll('div.sourceCode').forEach((block) => {
    const code = block.querySelector('code.language-bash, code.bash, code.sourceCode.bash');
    const pre  = block.querySelector('pre');
    if (!code || !pre) return;

    // Mark the <pre> as an executable Thebe cell
    pre.setAttribute('data-executable', 'true');
    pre.setAttribute('data-language', 'bash');

    // Ensure there is an output area immediately after the code block
    const next = block.nextElementSibling;
    const needsOutput = !(next && next.classList && next.classList.contains('output'));
    if (needsOutput) {
      const out = document.createElement('div');
      out.className = 'output';
      block.insertAdjacentElement('afterend', out);
    }

    // (Optional) tag for clarity
    block.classList.add('thebelab-cell');
  });
});
</script>
